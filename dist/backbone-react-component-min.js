!function(a,b){"function"==typeof define&&define.amd?define(["react","backbone","underscore","jquery"],b):(a.Backbone.React||(a.Backbone.React={}),a.Backbone.React.Component=b(React,Backbone,_,$))}(window,function(a,b,c,d){"use strict";return b.React||(b.React={}),b.React.Component=function(a){this.cid=c.uniqueId(),a=a||{},this.setElement(a.el),delete a.el,this.model=a.model,delete a.model,this.collection=a.collection,delete a.collection,this.initialize&&this.initialize(a)},b.React.Component.extend=function(){var d,e=arguments[0],f=function(){var a=new d(arguments[0],arguments[1]);return b.React.Component.apply(a,arguments),a};return f.extend=function(){return b.React.Component.extend(c.extend({},e,arguments[0]))},c.extend(f.prototype,b.React.Component.prototype,e),d=a.createClass(f.prototype),f},c.extend(b.React.Component.prototype,b.Events,{$:function(){return this.$el?this.$el.find.apply(this.$el,arguments):void 0},componentDidMount:function(){this.setElement(this.getDOMNode()).startModelListeners().startCollectionListeners()},componentWillUnmount:function(){this.stopListening()},getCollection:function(){return this.getOwner().collection},getModel:function(){return this.getOwner().model},getOwner:function(){for(var a=this;a.props.__owner__;)a=a.props.__owner__;return a},mount:function(b,d){if(!b&&!this.el)throw new Error("No element to mount on");return b||(b=this.el),d||(this.model&&this.collection?d=c.compose(this.setPropsModel.bind(this),this.setPropsCollection.bind(this)):this.model?d=this.setPropsModel.bind(this):this.collection&&(d=this.setPropsCollection.bind(this))),a.renderComponent(this,b,d),this.isRendered=!0,this},onError:function(){return this.setProps({isRequesting:!1,hasError:!0})},onRequest:function(){this.setProps({isRequesting:!0})},onSync:function(){this.setProps({isRequesting:!1}),this.collection&&this.setPropsCollection(),this.model&&this.setPropsModel()},remove:function(){return this.unmount(),this.el.remove(),this},setElement:function(a){if(a&&a instanceof d){if(a.length>1)throw new Error("You can only assign one element to a component");this.el=a[0],this.$el=a}else a&&(this.el=a,this.$el=d(a));return this},setPropsCollection:function(){var a=arguments[arguments.length-1];a&&a.xhr||this.setProps({collection:this.collection.toJSON()})},setPropsModel:function(){var a=arguments[arguments.length-1];a&&a.xhr||this.setProps(this.model.toJSON())},startCollectionListeners:function(){return this.collection&&this.listenTo(this.collection,"add remove change",this.setPropsCollection).listenTo(this.collection,"error",this.onError).listenTo(this.collection,"request",this.onRequest).listenTo(this.collection,"sync",this.onSync),this},startModelListeners:function(){return this.model&&this.listenTo(this.model,"change",this.setPropsModel).listenTo(this.model,"error",this.onError).listenTo(this.model,"request",this.onRequest).listenTo(this.model,"sync",this.onSync),this},unmount:function(){if(!a.unmountComponentAtNode(this.el.parentNode))throw new Error("There was an error unmounting the component");delete this.isRendered}}),b.React.Component});