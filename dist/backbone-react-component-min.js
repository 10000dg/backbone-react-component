!function(a,b){"function"==typeof define&&define.amd?define(["react","backbone","underscore"],b):(a.Backbone.React||(a.Backbone.React={}),a.Backbone.React.Component=b(React,Backbone,_))}(window,function(a,b,c){"use strict";return b.React||(b.React={}),b.React.Component=function(a){this.cid=c.uniqueId(),this.options=c.defaults(a||{},{}),this.setElement(this.options.el),delete this.options.el,this.model=this.options.model,delete this.options.model,this.model&&this.startModelListeners()},b.React.Component.extend=function(){var d=arguments[0],e=a.createClass(c.extend({},b.React.Component.prototype,d)),f=function(){var a=new e(arguments[0],arguments[1]);return b.React.Component.apply(a,arguments),a};return f.extend=function(){return b.React.Component.extend(c.extend({},d,arguments[0]))},f},c.extend(b.React.Component.prototype,b.Events,{componentDidMount:function(){this.setElement(this.getDOMNode()).startModelListeners()},componentWillUnmount:function(){this.stopListening()},mount:function(b,c){if(!b&&!this.el)throw new Error("No element to mount on");return b||(b=this.el),!c&&this.model&&(c=this.setPropsModel.bind(this)),a.renderComponent(this,b,c),this.isRendered=!0,this},remove:function(){return this.unmount()&&this.el.remove(),this},setElement:function(a){if(a&&a instanceof $){if(a.length>1)throw new Error("You can only assign one element to a component");this.el=a[0],this.$el=a}else a&&(this.el=a,$&&(this.$el=$(a)));return this},setPropsModel:function(){return this.replaceProps(this.model.toJSON())},startModelListeners:function(){this.model&&this.listenTo(this.model,"change",this.setPropsModel).listenTo(this.model,"change:*",this.setPropsModel).listenTo(this.model,"add:*",this.setPropsModel).listenTo(this.model,"remove:*",this.setPropsModel)},unmount:function(){return a.unmountComponentAtNode(this.el.parentNode)}}),b.React.Component});