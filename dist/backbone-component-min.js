!function(a,b){"function"==typeof define&&define.amd?define(["react","backbone","underscore"],b):a.Backbone.Component=b(React,Backbone,_)}(window,function(a,b,c){"use strict";return b.Component=function(a){this.cid=c.uniqueId(),a=c.defaults(a||{},{}),this.setElement(a.el),this.model=a.model,this.model&&this.startModelListeners()},b.Component.extend=function(){var d=arguments[0],e=a.createClass(d),f=function(){var a=new e(arguments[0],arguments[1]);return c.extend(a,b.Component.prototype),b.Component.apply(a,arguments),a};return f.extend=function(){return b.Component.extend(c.extend({},d,arguments[0]))},f},c.extend(b.Component.prototype,b.Events,{remove:function(){this.stopListening(),this.$el&&(a.unmountComponentAtNode(this.$el),this.$el.remove())},renderComponent:function(b,c){var d,e;if(b&&b.length||this.$el&&this.$el.length){for(b||(b=this.$el),!c&&this.model&&(c=this.setPropsModel.bind(this)),d=0,e=b.length;e>d;d+=1)a.renderComponent(this,b[d],c);return this.isRendered=!0,this}},setElement:function(a){a&&(this.$el=a instanceof $?a:$(a))},setPropsModel:function(){return this.replaceProps(this.model.toJSON())},startModelListeners:function(){var a,b;if(this.events)for(a in this.events)b="function"==typeof this.events[a]?this.events[a]:this[this.events[a]],this.listenTo(this.model,a,b);else{var c=function(){this.isRendered?this.setPropsModel():this.renderComponent(null,this.setPropsModel.bind(this))};this.listenTo(this.model,"change",c).listenTo(this.model,"change:*",c).listenTo(this.model,"add:*",c).listenTo(this.model,"remove:*",c)}}}),b.Component});